-- Create CLIENT table
CREATE TABLE CLIENT (
  CNP_CLIENT BIGINT NOT NULL PRIMARY KEY,
  NUME VARCHAR(50) NOT NULL,
  PRENUME VARCHAR(50) NOT NULL,
  ADRESA VARCHAR(255),
  TELEFON VARCHAR(20),
  EMAIL VARCHAR(50)
);

-- Create MASINA table
CREATE TABLE MASINA (
  SERIE_SASIU VARCHAR(50) NOT NULL PRIMARY KEY,
  MARCA VARCHAR(50) NOT NULL,
  MODEL VARCHAR(50) NOT NULL,
  AN_FABRICATIE INT NOT NULL,
  NR_INMATRICULARE VARCHAR(50),
  CNP_CLIENT BIGINT NOT NULL,
  CONSTRAINT CLIENT_MASINA_FK FOREIGN KEY (CNP_CLIENT) REFERENCES CLIENT (CNP_CLIENT) ON DELETE CASCADE
);

-- Create PROGRAMARI table
CREATE TABLE PROGRAMARI (
  NR_PROGRAMARE INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  DATA_PROGRAMARE DATE NOT NULL,
  SERIE_SASIU VARCHAR(50),
  DESCRIERE VARCHAR(255),
  CONSTRAINT FK_SERIE_SASIU FOREIGN KEY (SERIE_SASIU) REFERENCES MASINA (SERIE_SASIU) ON DELETE CASCADE
);

-- Create SERVICII table
CREATE TABLE SERVICII (
  ID_SERVICIU INT NOT NULL PRIMARY KEY,
  DENUMIRE_SERVICIU VARCHAR(50) NOT NULL,
  PRET DECIMAL(10,2) NOT NULL,
  DESCRIERE VARCHAR(255)
);

-- Create PIESE table
CREATE TABLE PIESE (
  ID_PIESA INT NOT NULL PRIMARY KEY,
  DENUMIRE_PIESA VARCHAR(50) NOT NULL,
  PRET DECIMAL(10,2) NOT NULL,
  CANTITATE INT
);

-- Create ANGAJAT table
CREATE TABLE ANGAJAT (
  CNP_ANGAJAT BIGINT NOT NULL PRIMARY KEY,
  NUME VARCHAR(50) NOT NULL,
  PRENUME VARCHAR(50) NOT NULL,
  ADRESA VARCHAR(255),
  TELEFON VARCHAR(20),
  EMAIL VARCHAR(50),
  SALARIU DECIMAL(10,2) NOT NULL,
  DATA_ANGAJARE DATE NOT NULL
);

-- Create FACTURA table
CREATE TABLE facturi (
    ID_FACTURA INT PRIMARY KEY,
    DATA_EMITERE DATE NOT NULL,
    TOTAL_PLATA DECIMAL(10, 2) NOT NULL,
    CNP_CLIENT VARCHAR(13),
  CONSTRAINT CLIENT_MASINA_FK FOREIGN KEY (CNP_CLIENT) REFERENCES CLIENT (CNP_CLIENT) ON DELETE CASCADE
);


-- Create NECESITA table
CREATE TABLE NECESITA (
  ID_NECESITA INT NOT NULL PRIMARY KEY,
  NR_PROGRAMARE INT NOT NULL,
  ID_SERVICIU INT NOT NULL,
  CONSTRAINT NECESITA_PROGRAMARI_FK FOREIGN KEY (NR_PROGRAMARE) REFERENCES PROGRAMARI (NR_PROGRAMARE),
  CONSTRAINT NECESITA_SERVICII_FK FOREIGN KEY (ID_SERVICIU) REFERENCES SERVICII (ID_SERVICIU)
);

-- Create IMPUN table
CREATE TABLE IMPUN (
  ID_IMPUN INT NOT NULL PRIMARY KEY,
  ID_SERVICIU INT NOT NULL,
  ID_PIESA INT,
  CONSTRAINT IMPUN_SERVICIU_FK FOREIGN KEY (ID_SERVICIU) REFERENCES SERVICII (ID_SERVICIU),
  CONSTRAINT IMPUN_PIESA_FK FOREIGN KEY (ID_PIESA) REFERENCES PIESE (ID_PIESA)
);

-- Create ANGAJAT_FACTURA_SERVICII table
CREATE TABLE ANGAJAT_FACTURA_SERVICII (
  CNP_ANGAJAT BIGINT NOT NULL,
  ID_FACTURA INT NOT NULL,
  ID_SERVICIU INT NOT NULL,
  CONSTRAINT ANGFACSER_ID_SERVICIU_FK FOREIGN KEY (ID_SERVICIU) REFERENCES SERVICII (ID_SERVICIU),
  CONSTRAINT ANGFACSER_CNP_ANGAJAT_FK FOREIGN KEY (CNP_ANGAJAT) REFERENCES ANGAJAT (CNP_ANGAJAT),
  CONSTRAINT ANGFACSER_ID_FACTURA_FK FOREIGN KEY (ID_FACTURA) REFERENCES FACTURA (ID_FACTURA)
);

-- Insert statements for CLIENT table
INSERT INTO CLIENT (CNP_CLIENT, NUME, PRENUME, ADRESA, TELEFON, EMAIL) VALUES
(1234567890, 'Popescu', 'Ion', 'Strada Principala, Nr. 10', '0721123456', 'ion.popescu@email.com'),
(5555555555, 'Georgescu', 'Elena', 'Str. Unirii 5', '0765123456', 'georgescu.elena@example.com'),
(1444444444, 'Dumitrescu', 'George', 'Str. Revolutiei 4', '0754123456', 'dumitrescu.george@example.com'),
(1333333333, 'Vasilescu', 'Maria', 'Str. Libertatii 3', '0743123456', 'vasilescu.maria@example.com'),
(1211111111, 'Popescu', 'Ion', 'Str. Florilor 1', '0721123456', 'popescu.ion@example.com'),
(1222222222, 'Ionescu', 'Ana', 'Str. Mihai Viteazu 2', '0732123456', 'ionescu.ana@example.com');

-- Insert statements for MASINA table
INSERT INTO MASINA (SERIE_SASIU, MARCA, MODEL, AN_FABRICATIE, NR_INMATRICULARE, CNP_CLIENT) VALUES
('ABC123456', 'Toyota', 'Corolla', 2020, 'B-123-ABC', 1234567890),
('ABC123', 'Ford', 'Focus', 2018, 'PH-01-ABC', 1211111111),
('XYZ456', 'Renault', 'Clio', 2019, 'PH-02-XYZ', 1333333333),
('JKL789', 'Volkswagen', 'Golf', 2017, 'PH-03-JKL', 5555555555),
('MNO012', 'Opel', 'Astra', 2020, 'PH-04-MNO', 1444444444),
('PQR345', 'Toyota', 'Corolla', 2016, 'PH-05-PQR', 5555555555);

-- Insert statements for PROGRAMARI table
INSERT INTO PROGRAMARI (NR_PROGRAMARE, DATA_PROGRAMARE, SERIE_SASIU, DESCRIERE) VALUES
(1, '2024-01-09', 'ABC123456', 'Revizie anuala'),
(2, '2024-01-05', 'ABC123', 'Verificare Tehnica Anuala'),
(3, '2024-02-02', 'XYZ456', 'Inlocuire Placute Frana'),
(4, '2024-03-15', 'JKL789', 'Revizie Completa'),
(5, '2024-04-05', 'ABC123', 'Diagnosticare Electronica'),
(6, '2024-04-10', 'PQR345', 'Schimb Ulei si Filtre'),
(7, '2024-05-25', 'JKL789', 'Inlocuire Kit Distributie');

-- Insert statements for SERVICII table
INSERT INTO SERVICII (ID_SERVICIU, DENUMIRE_SERVICIU, PRET) VALUES
(1, 'Schimb ulei si filtre', 50.00),
(2, 'Inlocuire placute de frana', 30.00),
(3, 'Verificare baterie', 15.00),
(4, 'Montare faruri LED', 20.00),
(5, 'Revizie completa', 100.00),
(6, 'Diagnosticare electronica', 40.00),
(7, 'Inlocuire distributie', 60.00),
(8, 'Curatare sistem franare', 25.00),
(9, 'Incarcare freon AC', 35.00),
(10, 'Schimb bujii', 15.00),
(11, 'Inlocuire ulei cutie viteze', 30.00),
(12, 'Montare set covorase auto', 10.00),
(13, 'Verificare kit distributie', 20.00),
(14, 'Inlocuire pompa apa', 40.00),
(15, 'Inlocuire becuri auto', 8.00);

-- Insert statements for PIESE table
INSERT INTO PIESE (ID_PIESA, DENUMIRE_PIESA, PRET) VALUES
(1, 'Filtru de ulei', 10.00),
(2, 'Placute de frana', 25.00),
(3, 'Baterie auto', 50.00),
(4, 'Faruri LED', 30.00),
(5, 'Ulei motor sintetic', 15.00),
(6, 'Lichid de frana', 12.50),
(7, 'Bucsa amortizor', 8.00),
(8, 'Set curele accesorii', 20.00),
(9, 'Lampa spate', 18.00),
(10, 'Bujii', 7.50);
